# 操作系统

## 第一章 操作系统概论

### 第二节 操作系统体系结构

#### 1、windows操作系统体系结构

1、内核

功能： 线程调度、陷入处理和异常调度、中断处理和调度、多处理器同步、共执行体使用的基本内核对象。

2、硬件抽象层HAL

系统可移植性的关键部分，为运行在windows操作系统上的硬件平台低级接口，隐藏了各种与硬件有关的细节，如I/O接口等专用的和依赖于计算机平台的函数

3、执行体

属于内核，以系统函数的形式提供了系统的服务，可以通过Win32API进行访问

4、系统进程和系统线程

执行系统代码

#### 2、Unix操作系统的体系结构

1、内核层

是操作系统管理和控制中心，常驻内存。有两种接口：内核与硬件的接口和内核与shell的接口

内核本身分为两部分：进程控制子系统和文件子系统

2、系统层

内核层与应用层之间，供程序员开发调用，包括进程管理、文件管理、中断状态、

3、使用层

面向用户操作的界面

#### 3、Linux操作系统的体系结构

四个部分： 内核、shell、文件系统和应用程序

#### 4、Android操作系统的体系结构

四个部分：从低到高：应用程序层、应用框架层、系统运行库层和Linux内核层。

### 第三节 操作系统的发展

#### 1、发展过程

1.手工阶段

2.监控程序

3.多道批处理

4.分时与实时操作系统

5.Unix通用操作系统

6.个人计算机操作系统

7.Android操作系统

### 第四节 操作系统的分类

> 1. 根据用户界面和功能特征分类
>
> 三种基本类型
>
> 1. 批处理系统
> 2. 分时系统
> 3. 实时系统
>
> 2.随着体系结构的发展
>
> 1.个人操作系统
>
> 2.网络操作系统
>
> 3.分布式操作系统
>
> 4.嵌入式操作系统

#### 1、批处理操作系统

用户将作业交给系统操作员，系统操作员在收到作业后，并不立即将作业输入计算机，而是收到一定数量的用户作业之后，组成一批作业，再把这批作业输入到计算机中。这批作业可在系统中形成一个连续、自动转接的作业溜。

系统操作员然后启动操作系统，系统自动、依次执行每个作业。

最后由操作员将执行完毕的作业交给用户。

1、特点与分类

特点： 成批处理，用户不能干预自己作业的运行。

目标：系统资源利率用高，作业吞吐率高。

分类：简单批处理和多道批处理

3、设计思想

在监控程序启动之前，操作员有选择把若干个作业合并成一批作业，将这批作业安装在输入设备上。、然后启动监控程序，监控程序将自动控制这批作业的执行。

作业的运行与衔接都监控程序自动控制，从而有效提高了作业运行的效率。

4、作业控制说明书

作业控制说明书是由作业控制语言编写的一段程序，它通常存储在被处理作业的前面。

作业的运行由作业控制说明书来传递给监控程序，运行过程中，监控程序读入并解释作业说明书，以控制各个作业步的执行。

5、一般指令和特权指令

操作系统的运行模式： 用户模式和特权模式

处理器的状态：目态（用户态）和管态（核心态）

机器指令：一般指令和特权指令

系统调用：用户程序不能直接使用特权指令，它们必须向操作系统请求这些功能，这些功能通过系统调用完成。

6、系统调用的过程

首先，当系统调用发生时，由中断或异常处理程序，把控制流程转移到监控程序内的一些特定位置，处理器模式变为特权模式。

其次，由监控程序执行被请求的功能。

最后，恢复现场，运行模式转为用户模式，控制权交给用户程序。

7、SPOOLing技术

是多道程序设计的关键技术之一，也称为假脱机技术。

#### 2、分时系统

在分时系统中，一台主机连接了若干个终端，每个终端可由一个用户使用。用户通过终端交互式地向系统提出命令请求，系统接收用户命令之后，采用时间片轮转方式处理服务请求，并通过交互方式在终端上向用户显示结果。

2、特点

多路性

交互性

独占性

及时性

#### 3、实时操作系统

实时操作系统是指，使计算机能够在规定的时间内，及时响应外部事件的请求，同时完成对该事件的处理，并能够控制所有实时设备和实时任务协调一致地工作的操作系统。

目标：在严格时间范围内，对外部请求作出反应，系统具有高可靠性。

分类： 硬实时系统和软实时系统

能力：除了多道程序系统的基本能力外，还有以下功能：

1、实时时钟管理

2、过载防护

3、高可靠性

#### 4、嵌入式操作系统

在各种电器、电子和智能机械上，嵌入安装着各种微处理器或微控制芯片。

嵌入式操作系统就是运行在嵌入式芯片环境中，对整个芯片以及它所操作、控制的各种部件装置等资源进行统一协调、调度、指挥和控制的系统软件。

### 第五节 操作系统的设计过程

1、功能设计

确定所设计的操作系统应具备哪些功能以及操作系统的类型，跟目标有关。

2、算法设计

选择和设计满足系统功能的算法和策略，并分析和估算其效能

3、结构设计

#### 2、操作系统的设计目标

1、可靠性

2、高效性

3、易维护性

4、可移植性

5、安全性

6、简明性

#### 3、操作系统的结构设计

操作系统结构研究的目标

1、系统模块化

2、模块标准化

3、通信规范化

#### 4、操作系统的机构

常见的操作系统结构

1、整体式结构

2、层次式结构

3、微内核（客户/服务器）结构

### 本章小结

本章主要讲述了计算机系统、操作系统的定义、操作系统的特征、操作系统的发展、操作系统的分类、操作系统的功能、操作系统设计等内容，重点掌握如下内容：

1、计算机系统

计算机系统的分层结构、计算机系统的组成、计算机系统的资源分类

2、操作系统的定义

3、操作系统的分类

1、批处理系统的基本工作方式、特点、工作原理、目标

2、分时系统的基本工作方式、设计思想、特点

3、实时系统的定义、设计目标

4、嵌入式操作的优点、运行环境

5、网络操作系统的定义、应用

6、分布式操作的特征、优点

4、操作系统设计

1、操作系统的设计过程

功能设计、算法设计、结构设计

2、操作系统的设计目标

可靠性、高效性、易维护性、可移植性、安全性、简明性

3、操作系统的结构

整体式结构、层次式结构、微内核结构

## 第二章操作系统运行环境

1、处理器

处理器的构成与基本工作方式、特权指令和非特权指令、处理器的工作状态、程序状态

2、计算机系统硬件部分

存储器类型、存储分块、存储器的层次结构

3、中断机制

中断与异常的概念、中断系统

4、系统调用

系统调用与函数调用的区别、系统调用的处理过程

### 第一节 处理器

处理器一般由运算器、控制器和一系列寄存器以及高速缓存构成

运算器实现算数与逻辑运算

控制器控制程序运行流程

寄存器用于处理器执行指令的过程中暂存数据、地址及指令信息

高速缓存：为CPU和内存提供一个高速的数据缓存区域

#### 1、处理器中的寄存器

两类寄存器：

1、用户可见寄存器，由编译程序分配，减少程序运行时访问内存的次数。

一般包括数据寄存器，地址寄存器，条件码寄存器。

2、控制和状态寄存器，用来控制处理器的操作常见的寄存器是程序计数器（PC）、指令寄存器（IR）、程序状态字（PSW）。

指令执行的基本过程

最简单的是两个步骤：

1、读取指令，并将程序计数器的值变成下一条指令的地址。

2、指令放入指令寄存器中，处理器解释并执行该指令。

指令的分类：

访问寄存器指令、I/O指令、算数逻辑指令、控制转移指令、控制器控制指令。

